"use strict";exports.id=530,exports.ids=[530],exports.modules={74530:(e,t,r)=>{let a=r(88228).NextResponse;var n=Object.create,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,l=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty,u=(e,t,r,a)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of i(t))d.call(e,n)||n===r||o(e,n,{get:()=>t[n],enumerable:!(a=s(t,n))||a.enumerable});return e},f=(e,t,r)=>(r=null!=e?n(l(e)):{},u(!t&&e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)),c={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(c,{FrameButton:()=>I,FrameContainer:()=>$,FrameImage:()=>F,FrameInput:()=>C,POST:()=>B,createPreviousFrame:()=>O,getFrameMessage:()=>x,getPreviousFrame:()=>j,parseFrameParams:()=>E,useFramesReducer:()=>k,validateActionSignature:()=>A}),e.exports=u(o({},"__esModule",{value:!0}),c);var p=r(92645),h=f(r(26510)),m=r(81144),y=r(22623);async function g({fid:e,options:t={}}){let{fallbackToCustodyAddress:r=!0,hubHttpUrl:a="https://api.neynar.com:2281",hubRequestOptions:n={headers:{api_key:"NEYNAR_FRAMES_JS"}}}=t,o=await fetch(`${a}/v1/verificationsByFid?fid=${e}`,n),{messages:s}=await o.json();if(s[0]){let{data:{verificationAddEthAddressBody:{address:e}}}=s[0];return e}if(!r)return null;{let t=(0,m.createPublicClient)({transport:(0,m.http)(),chain:y.optimism});return await t.readContract({abi:(0,m.parseAbi)(["function custodyOf(uint256 fid) view returns (address)"]),address:"0x00000000fc6c5f01fc30151999387bb99a9f489b",functionName:"custodyOf",args:[BigInt(e)]})}}var b=r(12665);async function v({fid:e,options:t={}}){let{hubHttpUrl:r="https://api.neynar.com:2281",hubRequestOptions:a={headers:{api_key:"NEYNAR_FRAMES_JS"}}}=t,n=await fetch(`${r}/v1/userDataByFid?fid=${e}`,a),{messages:o}=await n.json();if(!o||!(o.length>0))return null;{let e=o.reduce((e,t)=>{let r=b.Message.fromJSON(t);if(r.data?.type!==b.MessageType.USER_DATA_ADD)return;let a=r.data.timestamp,{type:n,value:o}=r.data.userDataBody;return e[n]?r.data.timestamp>e[n].timestamp&&(e[n]={value:o,timestamp:a}):e[n]={value:o,timestamp:a},e},{});return{profileImage:e[b.UserDataType.PFP]?.value,displayName:e[b.UserDataType.DISPLAY]?.value,username:e[b.UserDataType.USERNAME]?.value,bio:e[b.UserDataType.BIO]?.value}}}f(r(29599)),r(12665);var w=r(12665);async function R(e,{hubHttpUrl:t="https://api.neynar.com:2281",hubRequestOptions:r={headers:{api_key:"NEYNAR_FRAMES_JS"}}}={}){var a;let{headers:n,...o}=r,s=await fetch(`${t}/v1/validateMessage`,{method:"POST",headers:{"Content-Type":"application/octet-stream",...n},body:(a=e.trustedData.messageBytes,new Uint8Array(a.match(/.{1,2}/g).map(e=>parseInt(e,16)))),...o}),i=await s.json();return i.valid?{isValid:!0,message:w.Message.fromJSON(i.message)}:{isValid:!1,message:void 0}}var S=r(12665);async function _(e,{fetchHubContext:t=!0,hubHttpUrl:r="https://api.neynar.com:2281",hubRequestOptions:a={headers:{api_key:"NEYNAR_FRAMES_JS"}}}={}){var n,o;let s=S.Message.decode(Buffer.from(e.trustedData.messageBytes,"hex")),{buttonIndex:i,inputText:l}=s.data.frameActionBody||{},d=l?Buffer.from(l).toString("utf-8"):void 0,u=s.data.fid,f=s.data.frameActionBody.castId?{fid:(n=s.data.frameActionBody.castId).fid,hash:(o=n.hash,"0x"+Buffer.from(o).toString("hex"))}:void 0,c={buttonIndex:i,castId:f,inputText:d,requesterFid:u};if(!t)return c;{let[t,n,o,s,i,l,d]=await Promise.all([R(e,{hubHttpUrl:r,hubRequestOptions:a}),fetch(`${r}/v1/linkById?fid=${u}&target_fid=${f?.fid}&link_type=follow`,a).then(e=>e.ok||u===f?.fid),fetch(`${r}/v1/linkById?fid=${f?.fid}&target_fid=${u}&link_type=follow`,a).then(e=>e.ok||u===f?.fid),fetch(`${r}/v1/reactionById?fid=${u}&reaction_type=1&target_fid=${f?.fid}&target_hash=${f?.hash}`,a).then(e=>e.ok),fetch(`${r}/v1/reactionById?fid=${u}&reaction_type=2&target_fid=${f?.fid}&target_hash=${f?.hash}`,a).then(e=>e.ok),g({fid:u,options:{hubHttpUrl:r,hubRequestOptions:a}}),v({fid:u,options:{hubHttpUrl:r,hubRequestOptions:a}})]),p={isValid:t.isValid,casterFollowsRequester:o,requesterFollowsCaster:n,likedCast:s,recastedCast:i,requesterVerifiedAddresses:l?[l]:[],requesterUserData:d};return{...c,...p}}}var P=r(84793);async function A(e,t){if(t?.hubHttpUrl&&!t.hubHttpUrl.startsWith("http"))throw Error(`frames.js: Invalid Hub URL: ${t?.hubHttpUrl}, ensure you have included the protocol (e.g. https://)`);if(!e)return null;let{isValid:r,message:a}=await R(e,t);if(!r||!a)throw Error("frames.js: signature failed verification");return a}async function x(e,t){if(t?.hubHttpUrl&&!t.hubHttpUrl.startsWith("http"))throw Error(`frames.js: Invalid Hub URL: ${t?.hubHttpUrl}, ensure you have included the protocol (e.g. https://)`);if(!e)return console.log("info: no frameActionPayload, this is expected for the homeframe"),null;let r=await _(e,t);if(!r)throw Error("frames.js: something went wrong getting frame message");return r}function j(e){let t=(0,p.headers)(),r={userAgent:t.get("user-agent"),acceptLanguage:t.get("accept-language"),host:t.get("host"),pathname:t.get("next-url")??"",urlWithoutPathname:`${t.get("x-forwarded-proto")}://${t.get("x-forwarded-host")}`,url:t.get("referer")||`${t.get("x-forwarded-proto")}://${t.get("x-forwarded-host")}${t.get("next-url")??""}`};return O(E(e),r)}function O(e,t){return{...e,headers:t}}function E(e){let t=e?.postBody&&"string"==typeof e?.postBody?JSON.parse(e?.postBody):null,r=e?.prevState&&"string"==typeof e?.prevState?JSON.parse(e?.prevState):null,a=e?.prevRedirects&&"string"==typeof e?.prevRedirects?JSON.parse(e?.prevRedirects):null;return{postBody:t,prevState:r,pathname:e?.pathname&&"string"==typeof e?.pathname?e?.pathname:void 0,prevRedirects:a}}function k(e,t,r){return[null===r.prevState||null===r.postBody?t:e(r.prevState,r),function(e){}]}async function B(e,t,r){let n=await e.json(),o=new URL(e.url);o.pathname=o.searchParams.get("p")||"",o.searchParams.set("postBody",JSON.stringify(n)),o.searchParams.set("prevState",o.searchParams.get("s")??""),o.searchParams.set("prevRedirects",o.searchParams.get("r")??""),o.searchParams.delete("p"),o.searchParams.delete("s"),o.searchParams.delete("r");let s=j(Object.fromEntries(o.searchParams.entries()));if(s.postBody?.untrustedData.buttonIndex&&s.prevRedirects?.hasOwnProperty(s.postBody?.untrustedData.buttonIndex)&&s.prevRedirects[s.postBody?.untrustedData.buttonIndex])return a.redirect(s.prevRedirects[`${s.postBody?.untrustedData.buttonIndex}`],{status:302});if(s.postBody?.untrustedData.buttonIndex&&s.prevRedirects?.hasOwnProperty(`_${s.postBody?.untrustedData.buttonIndex}`)){if(!r)return a.json({message:"frames.js: You need to define either an href property on your FrameButton that has a `redirect` prop, or pass a third argument to `POST`"},{status:500,statusText:"frames.js: You need to define either an href property on your FrameButton that has a `redirect` prop, or pass a third argument to `POST`"});let e=r(s);return void 0===e?a.json({message:"frames.js: Your framesReducer (Second argument of POST) returned undefined when it needed to return a url"},{status:500,statusText:"frames.js: Your framesReducer (Second argument of POST) returned undefined when it needed to return a url"}):a.redirect(e,{status:302})}return a.redirect(o.toString(),{status:302})}function $({postUrl:e,children:t,state:r,pathname:a,previousFrame:n}){a||console.warn("frames.js: warning: You have not specified a `pathname` prop on your <FrameContainer>. This is not recommended, as it will default to the root path and not work if your frame is being rendered at a different path. Please specify a `pathname` prop on your <FrameContainer>.");let o={button:1,image:1,input:1},s={},i=h.default.createElement(h.default.Fragment,null,h.default.Children.map(t,e=>{if(null!==e)switch(e.type){case I:if(!h.default.isValidElement(e))return e;if(o.button>4)throw Error("too many buttons");return"post_redirect"===e.props.action&&(s[o.button]=e.props.target),h.default.createElement(M,{...e.props,actionIndex:o.button++});case C:if(o.input>1)throw Error("max one input allowed");return o.input++,e;case F:if(o.image>1)throw Error("max one image allowed");return o.image++,e;default:throw Error("invalid child of <Frame>, must be a <FrameButton> or <FrameImage>")}}));if(1===o.image)throw Error("an <FrameImage> element inside a <Frame> is required");let l=new URLSearchParams;l.set("p",a??n.headers.pathname??"/"),l.set("s",JSON.stringify(r)),l.set("r",JSON.stringify(s));let d=e.startsWith("/")?`${n.headers.urlWithoutPathname}${e}`:e,u=`${d}?${l.toString()}`;if(Buffer.from(u).byteLength>256)throw console.error(`post_url is too long. ${u.length} bytes, max is 256. The url is generated to include your state and the redirect urls in <FrameButton href={s. In order to shorten your post_url, you could try storing less in state, or providing redirects via the POST handler's second optional argument instead, which saves url space. The generated post_url was: `,u),Error("post_url is more than 256 bytes");return h.default.createElement(h.default.Fragment,null,h.default.createElement("meta",{name:"fc:frame",content:"vNext"}),h.default.createElement("meta",{name:"fc:frame:post_url",content:u}),i)}function I(e){return null}function M({actionIndex:e,target:t,action:r="post",children:a}){return h.default.createElement(h.default.Fragment,null,h.default.createElement("meta",{name:`fc:frame:button:${e}`,content:String(a)}),h.default.createElement("meta",{name:`fc:frame:button:${e}:action`,content:r}),t?h.default.createElement("meta",{name:`fc:frame:button:${e}:target`,content:t}):null)}function C({text:e}){return h.default.createElement(h.default.Fragment,null,h.default.createElement("meta",{name:"fc:frame:input:text",content:e}))}async function F(e){let t;if("children"in e){let r={..."1:1"===e.aspectRatio?{width:1146,height:1146}:{width:1146,height:600},...e.options??{}},a=new P.ImageResponse(h.default.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"stretch",width:"100%",height:"100vh",backgroundColor:"white"}},h.default.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",lineHeight:1.2,fontSize:36,color:"black",flex:1,overflow:"hidden"}},e.children)),r),n=await a?.arrayBuffer();t=`data:image/png;base64,${Buffer.from(n).toString("base64")}`}else t=e.src;return h.default.createElement(h.default.Fragment,null,h.default.createElement("meta",{name:"fc:frame:image",content:t}),h.default.createElement("meta",{property:"og:image",content:t}),e.aspectRatio&&h.default.createElement("meta",{name:"fc:frame:image:aspect_ratio",content:e.aspectRatio}))}},92645:(e,t,r)=>{r.r(t);var a=r(65144),n={};for(let e in a)"default"!==e&&(n[e]=()=>a[e]);r.d(t,n)},35347:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraftMode",{enumerable:!0,get:function(){return n}});let a=r(14191);class n{get isEnabled(){return this._provider.isEnabled}enable(){if(!(0,a.staticGenerationBailout)("draftMode().enable()"))return this._provider.enable()}disable(){if(!(0,a.staticGenerationBailout)("draftMode().disable()"))return this._provider.disable()}constructor(e){this._provider=e}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},65144:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{headers:function(){return u},cookies:function(){return f},draftMode:function(){return c}});let a=r(62086),n=r(55430),o=r(27025),s=r(54580),i=r(72934),l=r(14191),d=r(35347);function u(){if((0,l.staticGenerationBailout)("headers",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return n.HeadersAdapter.seal(new Headers({}));let e=s.requestAsyncStorage.getStore();if(!e)throw Error("Invariant: headers() expects to have requestAsyncStorage, none available.");return e.headers}function f(){if((0,l.staticGenerationBailout)("cookies",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return a.RequestCookiesAdapter.seal(new o.RequestCookies(new Headers({})));let e=s.requestAsyncStorage.getStore();if(!e)throw Error("Invariant: cookies() expects to have requestAsyncStorage, none available.");let t=i.actionAsyncStorage.getStore();return t&&(t.isAction||t.isAppRoute)?e.mutableCookies:e.cookies}function c(){let e=s.requestAsyncStorage.getStore();if(!e)throw Error("Invariant: draftMode() expects to have requestAsyncStorage, none available.");return new d.DraftMode(e.draftMode)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},84793:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ImageResponse",{enumerable:!0,get:function(){return a}});class a extends Response{static #e=this.displayName="ImageResponse";constructor(...e){let t=new ReadableStream({async start(t){let a=new(await Promise.resolve().then(r.bind(r,14021))).ImageResponse(...e);if(!a.body)return t.close();let n=a.body.getReader();for(;;){let{done:e,value:r}=await n.read();if(e)return t.close();t.enqueue(r)}}}),a=e[1]||{};super(t,{headers:{"content-type":"image/png","cache-control":"public, immutable, no-transform, max-age=31536000",...a.headers},status:a.status,statusText:a.statusText})}}},55430:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyHeadersError:function(){return n},HeadersAdapter:function(){return o}});let a=r(50783);class n extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new n}}class o extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,n){if("symbol"==typeof r)return a.ReflectAdapter.get(t,r,n);let o=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===o);if(void 0!==s)return a.ReflectAdapter.get(t,s,n)},set(t,r,n,o){if("symbol"==typeof r)return a.ReflectAdapter.set(t,r,n,o);let s=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===s);return a.ReflectAdapter.set(t,i??r,n,o)},has(t,r){if("symbol"==typeof r)return a.ReflectAdapter.has(t,r);let n=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0!==o&&a.ReflectAdapter.has(t,o)},deleteProperty(t,r){if("symbol"==typeof r)return a.ReflectAdapter.deleteProperty(t,r);let n=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0===o||a.ReflectAdapter.deleteProperty(t,o)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return n.callable;default:return a.ReflectAdapter.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new o(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,a]of this.entries())e.call(t,a,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},50783:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReflectAdapter",{enumerable:!0,get:function(){return r}});class r{static get(e,t,r){let a=Reflect.get(e,t,r);return"function"==typeof a?a.bind(e):a}static set(e,t,r,a){return Reflect.set(e,t,r,a)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},62086:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyRequestCookiesError:function(){return o},RequestCookiesAdapter:function(){return s},getModifiedCookieValues:function(){return l},appendMutableCookies:function(){return d},MutableRequestCookiesAdapter:function(){return u}});let a=r(27025),n=r(50783);class o extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new o}}class s{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return o.callable;default:return n.ReflectAdapter.get(e,t,r)}}})}}let i=Symbol.for("next.mutated.cookies");function l(e){let t=e[i];return t&&Array.isArray(t)&&0!==t.length?t:[]}function d(e,t){let r=l(t);if(0===r.length)return!1;let n=new a.ResponseCookies(e),o=n.getAll();for(let e of r)n.set(e);for(let e of o)n.set(e);return!0}class u{static wrap(e,t){let r=new a.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let o=[],s=new Set,l=()=>{var e;let n=null==fetch.__nextGetStaticStore?void 0:null==(e=fetch.__nextGetStaticStore.call(fetch))?void 0:e.getStore();if(n&&(n.pathWasRevalidated=!0),o=r.getAll().filter(e=>s.has(e.name)),t){let e=[];for(let t of o){let r=new a.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}};return new Proxy(r,{get(e,t,r){switch(t){case i:return o;case"delete":return function(...t){s.add("string"==typeof t[0]?t[0]:t[0].name);try{e.delete(...t)}finally{l()}};case"set":return function(...t){s.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t)}finally{l()}};default:return n.ReflectAdapter.get(e,t,r)}}})}}}};