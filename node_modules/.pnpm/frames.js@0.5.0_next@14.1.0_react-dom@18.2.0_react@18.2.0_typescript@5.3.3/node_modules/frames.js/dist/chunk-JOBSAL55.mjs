// src/getFrameFlattened.ts
function getFrameFlattened(frame) {
  const metadata = {
    "fc:frame": frame.version,
    "fc:frame:image": frame.image,
    "fc:frame:post_url": frame.postUrl,
    "fc:frame:input:text": frame.inputText,
    ...frame.imageAspectRatio ? { [`fc:frame:image:aspect_ratio`]: frame.imageAspectRatio } : {},
    ...frame.buttons?.reduce(
      (acc, button, index) => ({
        ...acc,
        [`fc:frame:button:${index + 1}`]: button.label,
        [`fc:frame:button:${index + 1}:action`]: button.action,
        [`fc:frame:button:${index + 1}:target`]: button.target
      }),
      {}
    )
  };
  return metadata;
}

export {
  getFrameFlattened
};
